<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç†”å²©ç•ªå‰§åº“ - æ’­æ”¾åˆ—è¡¨é¡µ | LavaAnime</title>
    <script src="https://s-sh-2164-assets.oss.dogecdn.com/cdn/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://s-sh-2164-assets.oss.dogecdn.com/cdn/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <script src="https://s-sh-2164-assets.oss.dogecdn.com/cdn/bootstrap/5.1.3/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://s-sh-2164-assets.oss.dogecdn.com/cdn/bootstarp-icon/1.7.2/bootstrap-icons.css">
    <script src="https://s-sh-2164-assets.oss.dogecdn.com/cdn/clipboard/2.0.9/clipboard.min.js"></script>
    <script src="./js/getUrlParams.js" crossorigin="anonymous"></script>
    <script src="./js/mySort.js" crossorigin="anonymous"></script>
    <link href="./style/scrollbar.css" rel="stylesheet" crossorigin="anonymous">
    <script src="./js/DPlayer.min.js"></script>
    </link>

    <script>
        $(document).ready(function () {
            const animeApiUrl = "https://dav.5t5.top/api/v3/share/list/jqMFl" // ç†”å²©äº‘ç›˜åˆ†äº«é“¾æ¥æ ¹ç›®å½•, éœ€è¦æ˜¯APIé“¾æ¥ã€‚
            const agefansDomain = "www.agemys.com"

            console.log('åœ°å€æ å‚æ•°æ•°æ®: ', getUrlParams());
            if (getUrlParams().path == undefined) {
                console.log("åœ°å€æ ä¸å«å‚æ•°! ")
                backParams = ''
                AnimePath = '/æœªæ‰¾åˆ°ç•ªç»„'
                thisId = '184017'
                $(`#views`).empty().append(` æ²¡äººè§‚çœ‹è¿‡æ­¤ç•ªç»„, å› ä¸ºå®ƒä¸å­˜åœ¨. ğŸ˜¢`)
                $('#rating').append(` è¯„åˆ† 4.04`)
                $("#la-list-container").append("<div class='alert alert-warning'><span>é”™è¯¯: æœªèƒ½ä»åœ°å€æ å–å¾—ç•ªç»„ä¿¡æ¯ã€‚<a class='alert-link' href='./index.html'>è¿”å›ä¸»é¡µ</a></span></div>")
                $("#loading").fadeOut()
            }
            else {
                thisAnimeYear = decodeURIComponent(getUrlParams().path).split('/')[1].replace('å¹´', '') // ä» path å‰¥ç¦»å‡ºå¹´ä»½ä¸å¸¦å¹´
                thisAnimeMonth = decodeURIComponent(getUrlParams().path).split('/')[2] // ä» path å‰¥ç¦»å‡ºæœˆä»½
                backParams = 'year=' + thisAnimeYear + '&' + 'month=' + thisAnimeMonth
                console.log('è¿”å›ä¸»é¡µçš„å‚æ•°: ', backParams);
                AnimePath = decodeURIComponent(getUrlParams().path)

                thisId = (decodeURIComponent(getUrlParams().path).match("\\d+$")[0]).toString()

                console.log("ä»åœ°å€æ å–å¾— BgmID:  ", thisId);

                $.ajax({ // å¢åŠ å¹¶è·å–è®¿é—®é‡
                    url: 'https://anime-api.5t5.top/v1/view/add/' + getUrlParams().id,
                    success: function (data) {
                        console.log('æˆåŠŸæ›´æ–°æ’­æ”¾é‡: ', data)
                        if (data.code == 0) {
                            $(`#views`).empty().append(` è®¿é—® ${data.data} æ¬¡`)
                        }
                        else {
                            console.log('æ›´æ–°è®¿é—®é‡å¤±è´¥: ', data)
                            $(`#views`).empty().append(` è·å–å¤±è´¥`)
                        }
                    }
                })

                // è·å–å­—å…¸å¹¶å¼€å§‹ç”Ÿæˆåˆ—è¡¨
                $.ajax({
                    url: "./assets/dict.json",
                    success: (result) => {
                        dict = result
                        getAnimeList(dict)
                        console.log("æˆåŠŸå–å¾—å…³é”®è¯è¯å…¸: ", dict)
                    }
                })

                // è·å– Bangumi API ç„¶åå¡«å……æ•°æ®
                $.ajax({
                    url: "https://bgm-api.5t5.top/v0/subjects/" + thisId,
                    success: result => {
                        bgmInfo = result
                        var backgroundUrl = bgmInfo.images.large.replace("lain.bgm.tv", "anime-img.5t5.top") + '/bg'
                        console.log('æˆåŠŸä»ç•ªç»„è®¡åˆ’APIå–å¾—æ•°æ®', result)
                        console.log(bgmInfo.images.large.replace("lain.bgm.tv", "anime-img.5t5.top") + '/bg')
                        $("#bg").css("background-image", "url(" + backgroundUrl + ")") // è®¾ç½®èƒŒæ™¯å›¾
                        $("#bangumi").attr("href", "https://bgm.tv/subject/" + thisId) // è®¾ç½®ç•ªç»„è®¡åˆ’é“¾æ¥
                        if (bgmInfo.name_cn == undefined || bgmInfo.name_cn == '') { bgmInfo.name_cn = bgmInfo.name } // å¦‚æœæ²¡æœ‰ä¸­æ–‡å, åˆ™ä½¿ç”¨åŸå
                        $('#name_cn').append(`${bgmInfo.name_cn}`) // å¡«å……ä¸­æ–‡å
                        $('#name').append(`${bgmInfo.name}`) // å¡«å……åŸå
                        $('#platform').append(`${bgmInfo.platform}`) // å¡«å……ç•ªç»„æ”¾é€å¹³å°
                        $('#rating').append(` è¯„åˆ† ${bgmInfo.rating.score}`) // å¡«å……è¯„åˆ†
                        if (bgmInfo.rating.score <= 5) { // å¦‚æœè¯„åˆ†ä½äº 5 åˆ™æ·»åŠ çº¢è‰²æç¤º
                            $('#rating').empty().append(` è¯„åˆ†è¾ƒå·® ${bgmInfo.rating.score}`).css('color', 'red')
                        }
                        if (bgmInfo.rating.score >= 8) { // å¦‚æœè¯„åˆ†é«˜äº 8 åˆ™æ·»åŠ ä¼˜ç§€
                            $('#rating').empty().append(` è¯„åˆ†æä½³ ${bgmInfo.rating.score}`)
                        }
                        if (bgmInfo.rating.score >= 7 && bgmInfo.rating.score < 8) { // å¦‚æœè¯„åˆ†åœ¨ 7-8 ä¹‹é—´åˆ™æ·»åŠ ä¸é”™
                            $('#rating').empty().append(` è¯„åˆ†ä¼˜ç§€ ${bgmInfo.rating.score}`)
                        }
                        $('#eps').append(` æ€» ${bgmInfo.eps} è¯`) // å¡«å……æ€»è¯æ•°
                        $('#tags-hide').hide() // éšè—æ ‡è®°é‡è¾ƒå°‘çš„æ ‡ç­¾
                        $('#show-more').on('click', function () { // ç‚¹å‡»æ˜¾ç¤ºæ›´å¤šæ ‡ç­¾
                            $('#tags-hide').fadeIn()
                            $('#show-more').hide()
                        })
                        for (let i = 0; i < bgmInfo.tags.length; i++) { // å¡«å……æ ‡ç­¾
                            if (bgmInfo.tags[i].count >= 10) {
                                $('#tags').append(`<span class="badge bg-secondary">${bgmInfo.tags[i].name} ${bgmInfo.tags[i].count}</span> `)
                            }
                            else {
                                $('#tags-hide').append(`<span class="badge bg-secondary">${bgmInfo.tags[i].name} ${bgmInfo.tags[i].count}</span> `)
                            }
                        }
                        if ($('#tags')[0].innerHTML == '') { // å¦‚æœå·²æœ‰çš„æ ‡ç­¾å®åœ¨å¤ªå°‘äº†ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾
                            $('#tags-hide').show()
                            $('#show-more').hide()
                        }
                    }
                })

                // è·å– Agefans æ•°æ®, æ•°æ®æ¥è‡ª https://github.com/czy0729/Bangumi-Static/
                $.ajax({
                    url: "https://anime-img.5t5.top/api/agefans/anime.min.json",
                    beforeSend: () => { $("#agefans").empty().append('<div class="spinner-grow spinner-grow-sm" role="status"></div> æ­£åœ¨åŠ è½½ Agefans ç•ªå‰§åˆ—è¡¨...') },
                    success: result => {
                        var agefansData = result
                        var agefansId = ''
                        for (var i = 0; i < agefansData.length; i++) {
                            if (agefansData[i].id == thisId) {
                                console.log('è§£æåˆ°å½“å‰ Bangumi ID å¯¹åº”çš„ Agefans æ•°æ®: ', agefansData[i])
                                $("#agefans").empty().append('<i class="bi bi-link-45deg"></i> å» Agefans è§‚çœ‹')
                                $("#agefans").attr("href", `https://${agefansDomain}/detail/${agefansData[i].a}`)
                                agefansId = agefansData[i].a
                            }
                        }
                        if (agefansId == '') {
                            $("#agefans").empty().append('<i class="bi bi-slash-circle"></i> æš‚æœªåœ¨ Agefans æ‰¾åˆ°æ­¤ç•ªå‰§')
                        }
                    },
                    error: () => {
                        $("#agefans").empty().append('<i class="bi bi-slash-circle"></i>Agefans API æ•…éšœ')
                    }
                })
            }


            $("#goback").attr("href", "/index.html?" + backParams) // è¿”å›ä¸»é¡µçš„é“¾æ¥
            $("#la-path").empty().append(decodeURI(AnimePath).replace('/', '').replace(/(\/)/g, '<i class="bi bi-arrow-right-short"></i>')) // å¡«å……å‰¯æ ‡é¢˜




            // ä»ç½‘ç›˜å–å¾—æ–‡ä»¶åˆ—è¡¨
            function getAnimeList() {
                $.ajax({
                    url: animeApiUrl + AnimePath,
                    success: function (result) {
                        console.log("ç†”å²©äº‘ç›˜å›å¤: ", result)
                        // å‰¥å£³
                        if (result.code == 404) {
                            $("#la-list-container").append("<div class='alert alert-warning'><span>ç†”å²©äº‘ç›˜è¿”å›äº† 404, æ‚¨çš„é“¾æ¥å¯èƒ½æœ‰è¯¯æˆ–ç•ªç»„ä¸å­˜åœ¨ã€‚<br>å‡ºç°æ­¤é”™è¯¯å¯èƒ½æ˜¯å› ä¸ºæ­¤ç•Œé¢çš„é“¾æ¥å¼‚å¸¸ã€‚<a class='alert-link' href='./index.html'>è¿”å›ä¸»é¡µ</a></span></div>")
                            $("#loading").fadeOut()

                        }
                        objects = result.data.objects
                        if (objects.length == 0) {
                            let airDate
                            if (bgmInfo.date) { // å¦‚æœ Bangumi æœ‰æä¾›æ”¾é€æ—¥æœŸ, åˆ™æå–æ”¾é€æ—¥æœŸ
                                airDate = bgmInfo.date
                            }
                            else { // å¦‚æœæ²¡æœ‰æ”¾é€æ—¥æœŸ
                                airDate = "æœªçŸ¥ / æš‚æœªå®šæ¡£"
                            }
                            setTimeout(() => {
                                $("#la-list-container").append("<div class='alert alert-info'><span>ç†”å²©äº‘ç›˜è¿”å›åˆ—è¡¨ä¸ºç©º, æ­¤ç•ªç»„ç›®å½•ä¸‹å°šæ— ä»»ä½•èµ„æº! <br>" + "è¯·ç¡®è®¤æ­¤ä½œå“å·²ç»å¼€å§‹è¿è½½, æ ¹æ® Bangumi Wiki, æœ¬ä½œçš„å¼€å§‹æ”¾é€æ—¥æœŸä¸º: " + airDate + "<br><a class='alert-link' href='./index.html'>è¿”å›ä¸»é¡µ</a></span></div>")
                                $("#loading").fadeOut()
                            }, 1500);

                        }
                        if (objects.length > 0) {
                            // ç”¨è‡ªå®šä¹‰æ’åºå‡½æ•°ç”¨ name æ’åº
                            mySort(objects, "name")
                            console.log(objects)
                            // å¼€å§‹å¾ªç¯
                            for (var i = 0; i < objects.length; i++) {
                                // å¦‚æœè¿™ä¸ªæ•°ç»„æè¿°çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ç±»å‹çš„
                                if (objects[i].type == "file") {
                                    var fileName = objects[i].name
                                    var fileId = objects[i].id
                                    printAnimeList(fileName, fileId)
                                    // 1ç§’åéšè—loading
                                    setTimeout(() => {
                                        $("#loading").fadeOut()
                                    }, 1000);
                                }
                            }
                        }

                    },
                    error: (result) => {
                        $("#la-list-container").append("<div class='alert alert-warning'><span>ç†”å²©äº‘ç›˜æœªè¿”å›å€¼æˆ–è¿”å›é”™è¯¯, æ‚¨çš„é“¾æ¥å¯èƒ½æœ‰è¯¯æˆ–ç†”å²©äº‘ç›˜å‡ºç°å¼‚å¸¸ã€‚<br><a class='alert-link' href='/list.html'>è¿”å›ä¸»é¡µ</a></span></div>")
                    }
                })
            }

            // å‘åˆ—è¡¨è¿½åŠ ç”Ÿæˆçš„åˆ—è¡¨çš„å‡½æ•°
            function printAnimeList(fileName, fileId) {
                // å–å¾—æ–‡ä»¶åç¼€å
                if (fileName.match(/\./)) {
                    var fileType = fileName.split('.').pop()
                }

                // ä»å­—å…¸å°†åŒ¹é…çš„å…³é”®å­—æ›¿æ¢ä¸ºå¯è§†åŒ–æ ‡ç­¾
                tagedName = fileName
                for (i = 0; i < dict.length; i++) {
                    // æ–°å»ºä¸€ä¸ªæ­£åˆ™å˜é‡
                    fromRegExp = new RegExp(dict[i].from, 'gi')
                    // ç”Ÿæˆçš„æ ‡ç­¾çš„html
                    toHtml = ' <span class="badge ' + dict[i].class + '">' + dict[i].to + '</span> '
                    // è¿›è¡Œæ›¿æ¢
                    tagedName = tagedName.replace(fromRegExp, toHtml)
                }
                // æ ‡ç­¾æ›¿æ¢å®Œæˆå, å†ç©ºæ ¼æ‰€æœ‰çš„ '[' ']'
                tagedName = tagedName.replace(/\[|\]/g, " ")

                // ç”Ÿæˆæ–°çš„html
                var rawNameByfileId = fileId + '-name'
                var newListObj = "<button style='opacity:0.85' id='" + fileId + "' type='button' data-bs-toggle='modal' data-bs-target='#la-player' class='la-list-anime list-group-item list-group-item-action'>" + tagedName + '<br><div id="' + rawNameByfileId + '" class="text-secondary fw-lighter" style="font-size: 12px">' + fileName + "</div></button>"
                // è¿½åŠ html
                $("#la-list-container").append(newListObj)
                // å†ç»™æ¯ä¸ªåˆ—è¡¨é¡¹å¢åŠ ç‚¹å‡»æ—¶äº‹ä»¶
                $("#" + fileId).click(function () {
                    // åŠ è½½ä¸­æç¤º
                    $("#la-player-header").empty().append("æ­£åœ¨ç­‰å¾…ç†”å²©äº‘ç›˜è¿”å›æ’­æ”¾é“¾æ¥...")
                    $("#la-player-body").empty().append("<p>è¯·ç¨ç­‰, è¿™æ®µæ–‡å­—é€šå¸¸æ´»ä¸è¿‡ 1 ç§’...<br>ä½†æ˜¯è‹¥æŒç»­çœ‹åˆ°æ­¤æç¤ºå¯èƒ½æ˜¯ç†”å²©äº‘ç›˜å‡ºç°å¼‚å¸¸æˆ–æ‚¨çš„ç½‘ç»œè¿æ¥ä¸ç¨³å®š! </p>")
                    // ç”Ÿæˆå½“å‰æ–‡ä»¶çš„å˜é‡
                    thisName = $('#' + rawNameByfileId)[0].innerText
                    thisId = $(this)[0].id
                    $.ajax({
                        url: "https://api.5t5.top/api/v1/object/url/" + thisId,
                        success: function (result) {

                            console.log(`æ‰“å¼€äº† ${fileType} æ ¼å¼çš„æ–‡ä»¶ã€‚`);

                            var mp4HelpMessage =
                                `
                            <p id="mp4HelpMessage" class="mb-0"><p class="text-secondary" style="font-size: 14px">
                                é»‘å± / æ— æ³•æ’­æ”¾ï¼Ÿå¯èƒ½æ˜¯æµè§ˆå™¨ä¸æ”¯æŒ H.265 ç¼–ç , 
                                <br>è¯·ä½¿ç”¨ä¸‹æ–¹çš„æŒ‰é’®è°ƒç”¨å¤–éƒ¨æ’­æ”¾å™¨ã€‚
                            </p></p>
                            `
                            var mkvHelpMessage =
                                `
                            <div id="mkvHelpMessage" class="mb-1">
                                æµè§ˆå™¨ä¸æ”¯æŒå½“å‰æ ¼å¼ (MKV), è¯·ä½¿ç”¨å¤–éƒ¨æ’­æ”¾å™¨æ¥æ’­æ”¾ã€‚
                                <div class="text-secondary" style="font-size: 14px">
                                    è¿™æ˜¯ç”±äºå¤§éƒ¨åˆ†å‡æ— æ³•æ”¯æŒ H.265 æ ¼å¼åŠ MKV æ ¼å¼å†…å°çš„å­—å¹•ã€‚éœ€è¦è°ƒç”¨æ‚¨è®¾å¤‡ä¸Šçš„æ’­æ”¾è½¯ä»¶æ’­æ”¾ã€‚
                                    <br>åŒæ—¶ä¹Ÿå¯ä»¥å¤åˆ¶é“¾æ¥åä½¿ç”¨å¼¹å¼¹ Play æ’­æ”¾æ•ˆæœæ›´ä½³ã€‚
                                </div>
                                <a class="text-decoration-none fw-bold" href="./help.html">>> æŸ¥çœ‹å¤–éƒ¨æ’­æ”¾å™¨å®‰è£…ä½¿ç”¨å¸®åŠ© <<<a/>
                            </div>
                            `
                            var mkvPlayerBtn =
                                `
                            <a id="mkvPlayerBtn" class="btn btn-sm btn-outline-primary mb-4 mt-0">å¼ºåˆ¶ç”¨æµè§ˆå™¨æ‰“å¼€ï¼ˆä¸æ”¯æŒå†…å°å­—å¹•å’Œ HEVCï¼‰</a>
                            `
                            var otherPlayers =
                                `
                            <h5 class="mb-3">å¤–éƒ¨æ’­æ”¾å™¨</h5>
                            <div class="row row-cols-4">
                                <a class="text-decoration-none text-secondary" href="potplayer://${result.url}">
                                    <img class="img-fluid mx-auto d-block" style="width: 60%;" src="./assets/PotPlayer.svg" alt="PotPlayer"/>
                                    <div class="text-center" style="font-size: 12px;">
                                        PotPlayer
                                    </div>
                                </a>
                                <a class="text-decoration-none text-secondary" href="vlc://${result.url}">
                                    <img class="img-fluid mx-auto d-block" style="width: 60%;" src="./assets/vlc.svg" alt="VLC"/>
                                    <div class="text-center" style="font-size: 12px;">
                                        VLC
                                    </div>
                                </a>
                                <a class="text-decoration-none text-secondary" href="iina://weblink?url=${result.url}">
                                    <img class="img-fluid mx-auto d-block" style="width: 60%;" src="./assets/iina.svg" alt="IINA"/>
                                    <div class="text-center" style="font-size: 12px;">
                                        IINA
                                    </div>
                                </a>
                                <a class="text-decoration-none text-secondary" href="${result.url}">
                                    <img class="img-fluid mx-auto d-block" style="width: 60%;" src="./assets/link.svg" alt="IINA"/>
                                    <div class="text-center" style="font-size: 12px;">
                                        ä¸‹è½½
                                    </div>
                                </a>
                            </div>
                            `

                            var urlLabel =
                                `
                            <div id="urlLabel" class="mt-3">
                                <h5 class="mb-3">ç›´é“¾ (ç‚¹å‡»å¤åˆ¶) <span id="copy-success" class=""> âœ… å¤åˆ¶æˆåŠŸ! </span></h5> 
                                <button style="max-width: 100%" class="copy btn btn-sm btn-outline-primary text-truncate" data-clipboard-text="${result.url}">${result.url}</button>
                            </div>
                            `
                            var downloadBtn =
                                `
                            <div class="row row-cols-3 mt-3">
                                <div> </div>
                                <a class="text-decoration-none text-secondary" href="${result.url}">
                                    <img class="img-fluid mx-auto d-block" style="width: 60%;" src="./assets/link.svg" alt="IINA"/>
                                    <div class="text-center" style="font-size: 12px;">
                                        ä¸‹è½½
                                    </div>
                                </a>
                                <div> </div>
                            </div>
                                `

                            // æ ‡é¢˜æ åŠ åå­—
                            $("#la-player-header").empty().append(thisName)
                            const dp = new DPlayer({
                                container: document.getElementById('dplayer'),
                                video: { url: result.url, screenshot: true, autoplay: true, hotkey: true },
                            })
                            if (fileType == 'mp4') {
                                $("#la-player-body").empty().append(mp4HelpMessage + otherPlayers + urlLabel) // åŠ å…¥æ’­æ”¾å™¨
                            }
                            if (fileType == 'mkv') {
                                dp.destroy()
                                $("#la-player-body").empty().append(mkvHelpMessage + mkvPlayerBtn + otherPlayers + urlLabel)
                                $("#mkvPlayerBtn").click(() => { // å¼ºåˆ¶ç”¨æµè§ˆå™¨æ‰“å¼€
                                    $("#mkvHelpMessage").empty() // æ¸…ç©ºæç¤º
                                    const dp = new DPlayer({
                                        container: document.getElementById('dplayer'),
                                        video: { url: result.url, screenshot: true, autoplay: true, hotkey: true },
                                    })
                                })
                            }
                            if (fileType == 'torrent') {
                                dp.destroy()
                                $("#la-player-body").empty().append("æ‚¨æ‰“å¼€äº†ä¸€ä¸ªç§å­æ–‡ä»¶, è‹¥æœ‰éœ€è¦, å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½ã€‚" + "<br>" + urlLabel)
                            }

                            if (fileType == 'zip' || fileType == '7z' || fileType == 'rar') {
                                dp.destroy()
                                $("#la-player-body").empty().append(`æ‚¨æ‰“å¼€äº†ä¸€ä¸ªå‹ç¼©åŒ…, è‹¥æœ‰éœ€è¦, å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½ã€‚<br>${downloadBtn}${urlLabel}`)
                            }
                            if (fileType == 'png' || fileType == 'jpg' || fileType == 'jpeg' || fileType == 'gif' || fileType == 'webp') {
                                dp.destroy()
                                $("#la-img-view").empty().append('<img class="img-fluid " src="' + result.url + '">')
                                $("#la-player-body").empty().append("æ‚¨æ‰“å¼€äº†ä¸€å¼ å›¾ç‰‡ã€‚")
                            }
                            if (fileType == 'txt') {
                                dp.destroy()
                                $("#la-player-body").empty().append("æ‚¨æ‰“å¼€äº†ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£, è‹¥æœ‰éœ€è¦, å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½ã€‚" + "<br>" + downloadBtn + urlLabel)
                            }
                            if (fileType == 'ass') {
                                dp.destroy()
                                $("#la-player-body").empty().append("æ‚¨æ‰“å¼€äº†ä¸€ä¸ªå¤–æŒ‚å­—å¹•, è‹¥æœ‰éœ€è¦, å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½ã€‚" + "<br>" + downloadBtn + urlLabel)
                            }
                            if (fileType == undefined) {
                                dp.destroy()
                                $("#la-player-body").empty().append("æ‚¨æ‰“å¼€äº†ä¸€ä¸ªæœªçŸ¥æ–‡ä»¶, è‹¥æœ‰éœ€è¦, å¯ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ä¸‹è½½ã€‚" + "<br>" + downloadBtn + urlLabel)
                            }

                            // ä¸ºæ’­æ”¾å™¨å¢åŠ å…³é—­æ—¶é”€æ¯äº‹ä»¶
                            var lavaAnimeModalPlayer = document.getElementById('la-player')
                            lavaAnimeModalPlayer.addEventListener('hide.bs.modal', function (event) {
                                dp.destroy()
                                $("#la-img-view").empty()
                            })

                            // å¢åŠ å‰ªè´´æ¿å¤åˆ¶
                            $("#copy-success").hide()
                            var clipboard = new ClipboardJS('.copy', {
                                container: document.getElementById('la-player')
                            });

                            clipboard.on('success', function (e) {
                                console.info('å¤åˆ¶æ“ä½œ:', e.action);
                                console.info('æ–‡æœ¬:', e.text);
                                console.info('è§¦å‘å™¨:', e.trigger);
                                $("#copy-success").fadeIn()
                                setTimeout(() => { $("#copy-success").fadeOut() }, 3000)

                            });

                            clipboard.on('error', function (e) {
                                console.error('å¤åˆ¶æ“ä½œå¤±è´¥:', e.action);
                                console.error('è§¦å‘å™¨:', e.trigger);
                            });

                        }
                    })

                })
            }



        })
    </script>
</head>

<body id="bg" style="background-attachment: fixed; background-position: center; background-size: cover;">
    <nav class="navbar navbar-light bg-light shadow fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" id="goback">
                <i class="bi bi-chevron-left mx-1"></i>
                <span>è¿”å›ç´¢å¼•é¡µ</span>
            </a>

            <div id="loading" class="spinner-border position-absolute top-0 end-0 m-2"></div>

        </div>
    </nav>
    <div class="container" style="margin-top: 72px;">
        <div class="my-2 list-group" style="opacity: 85%;">
            <div class="list-group-item">
                <div id="la-path" style="font-size: 14px;" class="fw-lighter text-truncate"></div>
            </div>
            <div class="list-group-item ">
                <span class="lead fs-4" id="name_cn"></span> <span class="text-muted fw-lighter" id="platform"></span>
                <div class="text-muted fw-lighter" id="name"></div>
                <!-- è®¿é—®é‡è¯„åˆ†ç­‰æ•°æ®æ  -->
                <div class="text-secondary fw-lighter fs-6">
                    <i class="bi bi-play-btn"></i><span id="views"></span>
                    <i class="bi bi-star"></i><span id="rating"></span>
                    <i class="bi bi-view-list"></i><span id="eps"></span>
                </div>
                <!-- æ ‡ç­¾æ  -->
                <span class="fw-lighter fs-6" id="tags"></span>
                <span class="fw-lighter btn btn-sm text-secondary" style="font-size: 13px;" id="show-more"><i
                        class="bi bi-arrow-down-short"></i>æ˜¾ç¤ºæ›´å¤š</span>
                <span class="fw-lighter fs-6" id="tags-hide"></span>
                <!-- å¤–éƒ¨é“¾æ¥æ  -->
                <div class="my-1">
                    <a id="agefans" target="_blank" class="fw-lighter fs-6 text-decoration-none"></a> <a
                        href="https://github.com/czy0729/Bangumi-Static" class="text-decoration-none text-secondary"
                        target="_blank" style="font-size: 12px;">(API By czy0729)</a><br>
                    <a id="bangumi" target="_blank" class="fw-lighter fs-6 text-decoration-none"><i
                            class="bi bi-link-45deg"></i> å» ç•ªç»„è®¡åˆ’ æŸ¥çœ‹è¯¦æƒ…</a>
                </div>
            </div>
        </div>



        <!-- åˆ—è¡¨å®¹å™¨ -->
        <div id="la-list-container" class="list-group mb-3"></div>

        <!-- å¼¹å‡ºçš„ â€œæ’­æ”¾å™¨â€ -->
        <div id="la-player" class="modal fade" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="text-break modal-header">
                        <h5 id="la-player-header" class="modal-title"></h5>
                        <button type="button" id="la-player-close" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Close"></button>
                    </div>
                    <div id="dplayer"></div>
                    <div id="la-img-view"></div>
                    <div id="la-player-body" class="modal-body"></div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡ä»£ç  -->
        <img src="https://www.bfcounter.vip/generatepic?userid=ce1d3f3b-ce67-4319-8222-e751f8262b2e" alt="Page Counter"
            class="visually-hidden">
        <span class="visually-hidden">
            <script type="text/javascript"
                src="https://v1.cnzz.com/z_stat.php?id=1280746775&web_id=1280746775"></script>
        </span>
        <script async defer data-website-id="5aad3d7c-6372-42aa-957e-ed4c945c0d08"
            src="https://umami.magma.ink/umami.js"></script>
</body>

</html>